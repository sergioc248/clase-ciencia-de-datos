<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>NeuroLens â€” Visual AI</title>

<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest/dist/tf.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@latest/dist/teachablemachine-image.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;800&family=IBM+Plex+Sans:wght@300;400;600&display=swap" rel="stylesheet">

<style>
:root{
    --bg:#05060b;
    --panel:#0b0f1a;
    --neon:#00f7ff;
    --neon2:#7c7cff;
    --accent:#00ff9c;
    --danger:#ff3b3b;
    --text:#e8f0ff;
}

*{box-sizing:border-box;}

body{
    margin:0;
    min-height:100vh;
    background:
        radial-gradient(circle at 20% 20%, rgba(0,247,255,0.08), transparent 40%),
        radial-gradient(circle at 80% 80%, rgba(124,124,255,0.08), transparent 40%),
        var(--bg);
    color:var(--text);
    font-family:'IBM Plex Sans', sans-serif;
    display:flex;
    flex-direction:column;
}

/* ===== HEADER ===== */
.header{
    padding:28px 60px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    border-bottom:1px solid rgba(255,255,255,0.05);
}

.logo{
    font-family:'Orbitron', sans-serif;
    font-size:1.6rem;
    letter-spacing:2px;
    color:var(--neon);
}

.status{
    font-size:0.85rem;
    opacity:0.7;
}

/* ===== MAIN LAYOUT ===== */
.main{
    flex:1;
    display:grid;
    grid-template-columns: 1.2fr 2fr 1.2fr;
    gap:40px;
    padding:50px 60px;
}

/* ===== LEFT PANEL ===== */
.panel{
    background:linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.01));
    border:1px solid rgba(255,255,255,0.06);
    border-radius:20px;
    padding:30px;
    box-shadow:0 0 60px rgba(0,0,0,0.6);
}

.panel h2{
    font-family:'Orbitron', sans-serif;
    font-size:1rem;
    letter-spacing:1px;
    color:var(--neon);
    margin-bottom:15px;
}

.panel p, .panel li{
    font-size:0.95rem;
    line-height:1.6;
    opacity:0.85;
}

.panel ul{padding-left:18px;}

/* ===== CENTER CAMERA CORE ===== */
.core{
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    gap:30px;
}

.camera-shell{
    width:520px;
    height:520px;
    border-radius:32px;
    padding:18px;
    background:linear-gradient(135deg, rgba(0,247,255,0.15), rgba(124,124,255,0.08));
    box-shadow:
        0 0 80px rgba(0,247,255,0.15),
        inset 0 0 40px rgba(0,0,0,0.6);
    position:relative;
}

.camera-frame{
    width:100%;
    height:100%;
    border-radius:24px;
    background:#000;
    overflow:hidden;
    display:flex;
    align-items:center;
    justify-content:center;
}

.scanline{
    position:absolute;
    left:0;
    width:100%;
    height:2px;
    background:linear-gradient(90deg, transparent, var(--neon), transparent);
    animation:scan 3s linear infinite;
    opacity:0.6;
}

@keyframes scan{
    0%{top:0%}
    100%{top:100%}
}

/* ===== BUTTON ===== */
.start-btn{
    padding:16px 46px;
    border-radius:999px;
    border:1px solid var(--neon);
    background:transparent;
    color:var(--neon);
    font-family:'Orbitron', sans-serif;
    letter-spacing:2px;
    cursor:pointer;
    transition:0.3s;
    box-shadow:0 0 25px rgba(0,247,255,0.3);
}

.start-btn:hover{
    background:var(--neon);
    color:#000;
    box-shadow:0 0 60px rgba(0,247,255,0.8);
}

/* ===== RIGHT PANEL ===== */
.predictions{
    display:flex;
    flex-direction:column;
    gap:14px;
}

.pred-item{
    padding:12px 16px;
    border-radius:12px;
    background:rgba(255,255,255,0.04);
    border:1px solid rgba(255,255,255,0.06);
    font-size:0.9rem;
}

/* ===== FOOTER ===== */
.footer{
    padding:25px;
    text-align:center;
    border-top:1px solid rgba(255,255,255,0.05);
    font-size:0.85rem;
    opacity:0.7;
}

.footer strong{
    display:block;
    font-family:'Orbitron', sans-serif;
    letter-spacing:2px;
    color:var(--neon);
}

@media(max-width:1200px){
    .main{grid-template-columns:1fr;}
    .camera-shell{width:380px;height:380px;}
}
</style>
</head>

<body>

<div class="header">
    <div class="logo">NEUROLENS</div>
    <div class="status">Real-time Visual Recognition System</div>
</div>

<div class="main">

    <!-- LEFT INFO PANEL -->
    <div class="panel">
        <h2>SYSTEM PROTOCOL</h2>
        <p>NeuroLens is a real-time image recognition interface powered by neural networks and local browser inference.</p>
        <ul>
            <li>Local processing (privacy-first)</li>
            <li>Neural classification</li>
            <li>Live video stream analysis</li>
            <li>Zero-cloud inference</li>
        </ul>
        <p style="margin-top:12px;opacity:0.6;">Experimental academic AI system</p>
    </div>

    <!-- CORE CAMERA -->
    <div class="core">
        <button class="start-btn" onclick="init()">ACTIVATE VISION</button>

        <div class="camera-shell">
            <div class="scanline"></div>
            <div class="camera-frame" id="webcam-container"></div>
        </div>
    </div>

    <!-- PREDICTIONS PANEL -->
    <div class="panel predictions" id="label-container">
        <h2>NEURAL OUTPUT</h2>
    </div>

</div>

<div class="footer">
    <div>Hecho en la UNAB</div>
    <strong>por Sergio Cuadros</strong>
</div>

<script>
const URL = "./my_model/";
let model, webcam, maxPredictions;

async function init() {
    const modelURL = URL + "model.json";
    const metadataURL = URL + "metadata.json";

    model = await tmImage.load(modelURL, metadataURL);
    maxPredictions = model.getTotalClasses();

    const flip = true;
    webcam = new tmImage.Webcam(480, 480, flip);
    await webcam.setup();
    await webcam.play();
    window.requestAnimationFrame(loop);

    const cam = document.getElementById("webcam-container");
    cam.innerHTML = "";
    cam.appendChild(webcam.canvas);

    const labelContainer = document.getElementById("label-container");
    labelContainer.innerHTML = "<h2>NEURAL OUTPUT</h2>";

    for (let i = 0; i < maxPredictions; i++) {
        const div = document.createElement("div");
        div.className = "pred-item";
        labelContainer.appendChild(div);
    }
}

async function loop() {
    webcam.update();
    await predict();
    window.requestAnimationFrame(loop);
}

async function predict() {
    const prediction = await model.predict(webcam.canvas);
    const labelContainer = document.getElementById("label-container");

    for (let i = 0; i < maxPredictions; i++) {
        const classPrediction = `${prediction[i].className} : ${(prediction[i].probability*100).toFixed(1)}%`;
        labelContainer.children[i+1].innerHTML = classPrediction;
    }
}
</script>

</body>
</html>
